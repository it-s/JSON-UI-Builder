<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
    <!-- JQUESY Stack -->
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.7.3/themes/base/jquery-ui.css">
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
    <script src="http://code.jquery.com/ui/1.10.4/jquery-ui.min.js"></script>
    <!-- The script -->
    <script src="js/builder.js"></script>
    <script>
        var html=[{cl:"container",cn:[{cl:"left_sidebar",cn:[{cl:["portlet","portlet-fixed"],cn:[{cl:"portlet-header",tx:"Data"},{cl:"portlet-content",cn:[{tg:"label",tx:"Data Contains Headers:"},{tg:"input",id:"vega-editor-data-headers",ar:{type:"checkbox",checked:"checked"}}]}]},{cl:"column",cn:[{cl:"portlet",cn:[{cl:"portlet-header",tx:"Cat A"},{cl:"portlet-content",cn:[{cl:"row",cn:[{tg:"label",tx:"Title:"}]},{cl:"row",cn:[{tg:"input",id:"vega-editor-col0-title",ar:{type:"tx",tx:""}}]},{cl:"row",cn:[{tg:"label",tx:"Data Type:"}]},{cl:"row",cn:[{tg:"select",cn:[{tg:"option",tx:"Text",ar:{value:"tx",selected:"selected"}},{tg:"option",tx:"Number",ar:{value:"number"}},{tg:"option",tx:"Date/Time",ar:{value:"date"}}]}]}]}]},{cl:"portlet",cn:[{cl:"portlet-header",tx:"Cat B"},{cl:"portlet-content",cn:[{cl:"row",cn:[{tg:"label",tx:"Title:"}]},{cl:"row",cn:[{tg:"input",id:"vega-editor-col0-title",ar:{type:"tx",tx:""}}]},{cl:"row",cn:[{tg:"label",tx:"Data Type:"}]},{cl:"row",cn:[{tg:"select",cn:[{tg:"option",tx:"Text",ar:{value:"tx",selected:"selected"}},{tg:"option",tx:"Number",ar:{value:"number"}},{tg:"option",tx:"Date/Time",ar:{value:"date"}}]}]}]}]},{cl:"portlet",cn:[{cl:"portlet-header",tx:"Cat A"},{cl:"portlet-content",cn:[{cl:"row",cn:[{tg:"label",tx:"Title:"}]},{cl:"row",cn:[{tg:"input",id:"vega-editor-col0-title",ar:{type:"tx",tx:""}}]},{cl:"row",cn:[{tg:"label",tx:"Data Type:"}]},{cl:"row",cn:[{tg:"select",cn:[{tg:"option",tx:"Text",ar:{value:"tx",selected:"selected"}},{tg:"option",tx:"Number",ar:{value:"number"}},{tg:"option",tx:"Date/Time",ar:{value:"date"}}]}]}]}]}]},{cl:["portlet","portlet-fixed"],cn:[{cl:"portlet-header",tx:"Chart"},{cl:"portlet-content",cn:[{cl:"row",cn:[{tg:"label",tx:"Title:"},{tg:"input",id:"vega-editor-chart-title",ar:{type:"tx",value:""}}]},{cl:"row",cn:[{tg:"label",tx:"Subtitle:"},{tg:"input",id:"vega-editor-chart-subtitle",ar:{type:"tx",value:""}}]},{cl:"row",cn:[{tg:"label",tx:"Show Legend:"},{tg:"input",id:"vega-editor-data-headers",ar:{type:"checkbox",checked:"checked"}}]},{cl:"row",cn:[{tg:"label",tx:"Interpolate:"},{tg:"input",id:"vega-editor-chart-interpolate",ar:{type:"checkbox"}}]}]}]},{cl:["portlet","portlet-fixed"],cn:[{cl:"portlet-header",tx:"Sacle X"},{cl:"portlet-content",cn:[{cl:"row",cn:[{tg:"label",tx:"Title:"},{tg:"input",id:"vega-editor-scaley-title",ar:{type:"tx",value:""}}]},{cl:"row",cn:[{tg:"label",tx:"Display Title:"},{tg:"input",id:"vega-editor-scaley-title-show",ar:{type:"checkbox"}}]},{cl:"row",cn:[{tg:"label",tx:"Padd Scale:"},{tg:"input",id:"vega-editor-scaley-nice",ar:{type:"checkbox",checked:"checked"}}]},{cl:"row",cn:[{tg:"label",tx:"Show Zero Mark:"},{tg:"input",id:"ega-editor-scaley-zero",ar:{type:"checkbox",checked:"checked"}}]},{cl:"row",cn:[{tg:"label",tx:"Show Grid:"},{tg:"input",id:"vega-editor-scaley-grid",ar:{type:"checkbox",checked:"checked"}}]}]}]},{cl:"column",cn:[]},{cl:["portlet","portlet-fixed"],cn:[{cl:"portlet-header",tx:"Sacle Y"},{cl:"portlet-content",cn:[{cl:"row",cn:[{tg:"label",tx:"Title:"},{tg:"input",id:"vega-editor-scaley-title",ar:{type:"tx",value:""}}]},{cl:"row",cn:[{tg:"label",tx:"Display Title:"},{tg:"input",id:"vega-editor-scaley-title-show",ar:{type:"checkbox"}}]},{cl:"row",cn:[{tg:"label",tx:"Padd Scale:"},{tg:"input",id:"vega-editor-scaley-nice",ar:{type:"checkbox",checked:"checked"}}]},{cl:"row",cn:[{tg:"label",tx:"Show Zero Mark:"},{tg:"input",id:"ega-editor-scaley-zero",ar:{type:"checkbox",checked:"checked"}}]},{cl:"row",cn:[{tg:"label",tx:"Show Grid:"},{tg:"input",id:"vega-editor-scaley-grid",ar:{type:"checkbox",checked:"checked"}}]}]}]},{cl:"column",cn:[]}]},{cl:"main"}]}];
        
        var builder = new UIBuilder().onBuildComplete(function(el){
                $(".column",el).sortable({
                    cancel: ".portlet-fixed",
                    connectWith: ".column",
                    handle: ".portlet-header",
                    cancel: ".portlet-toggle",
                    placeholder: "portlet-placeholder ui-corner-all",
                    update: function(event, ui) {
                        console.log("Sorting finished");
                    }
                });
                $(".portlet",el)
                    .addClass("ui-widget ui-widget-content ui-helper-clearfix ui-corner-all")
                    .find(".portlet-header")
                    .addClass("ui-widget-header ui-corner-all")
                    .prepend(builder.Element({tg:"span",cl:["glyphicons", "circle_minus", "portlet-toggle"],tx:"+"}));
                $(".portlet-toggle",el).click(function() {
                    var icon = $(this);
                    icon.toggleClass("circle_minus circle_plus");
                    icon.closest(".portlet").find(".portlet-content").toggle();
                });
            });

        var el = null;        
        window.onload = function () {
            el = builder.build(html);
            document.body.appendChild(el);
        }
        
    </script>
</head>
<body></body>
</html>