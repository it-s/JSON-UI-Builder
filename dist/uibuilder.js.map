{"version":3,"file":"uibuilder.js","sources":["../src/uiBuilderHelpers.js","../src/uiComponent.js","../src/uiBuilder.js"],"sourcesContent":["export default class UIBuilderHelpers {\n  static isDefined(v) {\n    return v != undefined;\n  }\n  static isObject(v) {\n    return (this.isDefined(v) && typeof v == \"object\");\n  }\n  static printf(str, scope) {\n    let regex = /\\{\\{(\\w+)\\}\\}/g;\n    let instance = str;\n    let from, to, m;\n    if (this.isObject(scope))\n      while ((m = regex.exec(str)) !== null) {\n        from = m[0]; to = scope[m[1]];\n        this.isDefined(to) &&\n          (instance = instance.replace(from, to));\n      }\n    else return str;\n    return instance;\n  }\n}","import UIBuilderHelpers from \"./uiBuilderHelpers\";\n\nexport default class UIComponent {\n  static attributes = {\n    \"id\": \"id\",\n    \"className\": \"cl\",\n    \"style\": \"st\",\n    \"attributes\": \"ar\",\n    \"html\": \"tx\",\n    \"data\": \"dt\",\n    \"scope\": \"sc\",\n    \"actions\": \"ac\"\n  };\n  tg; // tag name\n  id; // element id\n  st; // element styles as object\n  cl; // class list\n  ar; // attributes\n  dt; // data attributres\n  tx; // innerText\n  ac; // actions\n  sc; // element scope\n  cn; // element children\n  constructor(tag, attributes, children) {\n    tag &&\n      (this.tg = tag);\n    attributes &&\n      UIBuilderHelpers.isObject(attributes) &&\n      (this.map(attributes));\n    children &&\n      (this.cn = children);\n  }\n  map(attributes) {\n    if (attributes)\n      for (let key in attributes)\n        this[UIComponent.attributes[key]] = attributes[key];\n  }\n}","import UIBuilderHelpers from \"./uiBuilderHelpers\";\nimport UIComponent from \"./uiComponent\";\n\nclass UIBuilder {\n  _defaults = {\n    baseName: \"UI\",\n    autoID: false\n  };\n  _attrs = {\n    tg: \"div\",\n    id: \"\",\n    cl: [],\n    st: {},\n    ar: {},\n    dt: {},\n    tx: \"\",\n    ac: {},\n    sc: {}\n  };\n  constructor(options) {\n    (Object).assign(this, this._defaults, options);\n    this._elementCount = this._lvl = 0;\n  }\n  _buildElement(attrs, parent) {\n    try {\n      let _attrs = (Object).assign({}, this._attrs, attrs);\n      //assign unique element id\n      this.autoID &&\n        _attrs.id === \"\" &&\n        (_attrs.id = this.getNextID());\n      //create base element:\n      let el = document.createElement(_attrs.tg);\n      //set element ID:\n      _attrs.id !== \"\" && (el.id = _attrs.id);\n      //set element classes (if any):\n      (v => {\n        return UIBuilderHelpers.isObject(v) ?\n          v :\n          v.split(\" \");\n      })(_attrs.cl)\n        .forEach((cls) => el.classList.add(cls));\n      //set element attributes (if any):\n      Object\n        .keys(_attrs.ar)\n        .forEach((key) => el.setAttribute(key, _attrs.ar[key]));\n      //set element data attributes (if any):\n      Object\n        .keys(_attrs.dt)\n        .forEach((key) => el.setAttribute(\"data-\" + key, _attrs.ar[key]));\n      //set element styles (if any):\n      Object.assign(el.style, _attrs.st);\n      //set element actions (if any):\n      Object\n        .keys(_attrs.ac)\n        .forEach((key) => el.addEventListener(key, _attrs.ac[key].bind(_attrs.sc)));\n      //set element inner HTML (if any)\n      el.innerHTML = UIBuilderHelpers.printf(_attrs.tx, _attrs.sc);\n      //append element to the parent element (if set)\n      parent &&\n        UIBuilderHelpers.isObject(parent) &&\n        (parent.appendChild(el));\n      return el;\n    } catch (e) {\n      throw new Error(\"UIBuilder._buildElement internal error. Details: \" + e);\n    }\n  }\n  _build(node, root) {\n    let el;\n    this._lvl++;\n    try {\n      for (let i = 0; i < node.length; i++) {\n        let children = node[i].cn;\n        el = this._buildElement(node[i], root);\n        children &&\n          UIBuilderHelpers.isDefined(children) &&\n          (this._build(children, el));\n      }\n      node.forEach((attrs) => {\n      });\n      this._lvl--;\n      return root || el || new HTMLElement;\n    } catch (e) {\n      throw new Error(\"UIBuilder._build internal error. Details: \" + e);\n    }\n  }\n  getElementCount() {\n    return this._elementCount;\n  }\n  getNextID() {\n    return this.baseName + \"-\" + this._elementCount++;\n  }\n  getBaseName() {\n    return this.baseName;\n  }\n\n  build(spec, parent) {\n    if (!UIBuilderHelpers.isObject(spec))\n      throw new TypeError(\"UIBuilder.build(spec, parent): spec must be an array\");\n    this._lvl = 0;\n    return new Promise((resolve, reject) => {\n      try {\n        resolve(this._build(spec, parent));\n      } catch (e) {\n        reject(e);\n      }\n    });\n  }\n}"],"names":["UIBuilderHelpers","v","undefined","this","isDefined","str","scope","regex","instance","from","to","m","isObject","exec","replace","UIComponent","tag","attributes","children","tg","map","cn","key","UIBuilder","options","_defaults","_attrs","assign","_elementCount","_lvl","attrs","parent","Object","autoID","id","getNextID","el","document","createElement","split","cl","forEach","cls","classList","add","keys","ar","setAttribute","dt","style","st","ac","addEventListener","bind","sc","innerHTML","printf","tx","appendChild","e","Error","node","root","i","length","_buildElement","_build","HTMLElement","baseName","spec","TypeError","Promise","resolve","reject","_this"],"mappings":"8kBAAqBA,2HACFC,eACHC,GAALD,mCAEOA,UACNE,KAAKC,UAAUH,IAAkB,oBAALA,sBAAAA,mCAExBI,EAAKC,OACbC,EAAQ,iBACRC,EAAWH,EACXI,SAAMC,SAAIC,aACVR,KAAKS,SAASN,GAMb,OAAOD,EALV,KAAiC,QAAzBM,EAAIJ,EAAMM,KAAKR,OACdM,EAAE,GAAID,EAAKJ,EAAMK,EAAE,SACrBP,UAAUM,KACZF,EAAWA,EAASM,QAAQL,EAAMC,WAGlCF,WChBUO,kCAqBPC,EAAKC,EAAYC,8BAExBf,KAAKgB,GAAKH,MAEXhB,iBAAiBY,SAASK,IACzBd,KAAKiB,IAAIH,OAETd,KAAKkB,GAAKH,mDAEXD,MACEA,EACF,IAAK,IAAIK,KAAOL,OACTF,EAAYE,WAAWK,IAAQL,EAAWK,YAjClCP,YACZE,eACC,eACO,WACJ,gBACK,UACN,UACA,WACC,aACE,UCRTM,gCAgBQC,+BAfZC,oBACY,aACF,QAEVC,WACM,SACA,8BAKA,uBAKKC,OAAOxB,KAAMA,KAAKsB,UAAWD,QACjCI,cAAgBzB,KAAK0B,KAAO,4DAErBC,EAAOC,WAEbL,EAAUM,OAAQL,UAAWxB,KAAKuB,OAAQI,QAEzCG,QACW,KAAdP,EAAOQ,KACNR,EAAOQ,GAAK/B,KAAKgC,iBAEhBC,EAAKC,SAASC,cAAcZ,EAAOP,UAEzB,OAAPe,KAAcE,EAAGF,GAAKR,EAAOQ,uBAG3BlC,iBAAiBY,SAASX,GAC/BA,EACAA,EAAEsC,MAAM,MACTb,EAAOc,IACPC,QAAQ,SAACC,UAAQN,EAAGO,UAAUC,IAAIF,YAGlCG,KAAKnB,EAAOoB,IACZL,QAAQ,SAACnB,UAAQc,EAAGW,aAAazB,EAAKI,EAAOoB,GAAGxB,aAGhDuB,KAAKnB,EAAOsB,IACZP,QAAQ,SAACnB,UAAQc,EAAGW,aAAa,QAAUzB,EAAKI,EAAOoB,GAAGxB,aAEtDK,OAAOS,EAAGa,MAAOvB,EAAOwB,WAG5BL,KAAKnB,EAAOyB,IACZV,QAAQ,SAACnB,UAAQc,EAAGgB,iBAAiB9B,EAAKI,EAAOyB,GAAG7B,GAAK+B,KAAK3B,EAAO4B,SAErEC,UAAYvD,iBAAiBwD,OAAO9B,EAAO+B,GAAI/B,EAAO4B,OAGvDtD,iBAAiBY,SAASmB,IACzBA,EAAO2B,YAAYtB,GACfA,EACP,MAAOuB,SACD,IAAIC,MAAM,oDAAsDD,mCAGnEE,EAAMC,OACP1B,cACCP,eAEE,IAAIkC,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAAK,KAChC7C,EAAW2C,EAAKE,GAAG1C,KAClBlB,KAAK8D,cAAcJ,EAAKE,GAAID,MAE/B9D,iBAAiBI,UAAUc,IAC1Bf,KAAK+D,OAAOhD,EAAUkB,YAEtBK,QAAQ,SAACX,WAETD,OACEiC,GAAQ1B,GAAM,IAAI+B,YACzB,MAAOR,SACD,IAAIC,MAAM,6CAA+CD,qDAI1DxD,KAAKyB,yDAGLzB,KAAKiE,SAAW,IAAMjE,KAAKyB,6DAG3BzB,KAAKiE,uCAGRC,EAAMtC,kBACL/B,iBAAiBY,SAASyD,GAC7B,MAAM,IAAIC,UAAU,oEACjBzC,KAAO,EACL,IAAI0C,QAAQ,SAACC,EAASC,SAEjBC,EAAKR,OAAOG,EAAMtC,IAC1B,MAAO4B,KACAA"}