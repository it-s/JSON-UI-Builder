{"version":3,"file":"uibuilder.js","sources":["../src/uiBuilderHelpers.js","../src/uiComponent.js","../src/svgUiComponent.js","../src/uiBuilder.js"],"sourcesContent":["export default class UIBuilderHelpers {\n  static isDefined(v) {\n    return v != undefined;\n  }\n  static isObject(v) {\n    return (this.isDefined(v) && typeof v == \"object\");\n  }\n  static isArray(v) {\n    return (this.isDefined(v) && typeof v == \"object\" && v[\"length\"] !== undefined);\n  };\n  static isString(v) {\n    return (this.isDefined(v) && typeof v == \"string\");\n  }\n  static printf(str, scope) {\n    let regex = /\\{\\{(\\w+)\\}\\}/g;\n    let instance = str;\n    let from, to, m;\n    if (this.isObject(scope)) {\n      debugger;\n      while ((m = regex.exec(str)) !== null) {\n        from = m[0]; to = scope[m[1]];\n        this.isDefined(to) &&\n          (instance = instance.replace(from, to));\n      }\n    } else return str;\n    return instance;\n  }\n}","import UIBuilderHelpers from \"./uiBuilderHelpers\";\n\nexport default class UIComponent {\n  static SVG_NS_ATTR = \"http://www.w3.org/2000/svg\";\n  static attributes = {\n    \"id\": \"id\",\n    \"ns\": \"ns\",\n    \"className\": \"cl\",\n    \"style\": \"st\",\n    \"attributes\": \"ar\",\n    \"html\": \"tx\",\n    \"data\": \"dt\",\n    \"scope\": \"sc\",\n    \"actions\": \"ac\"\n  };\n  tg; // tag name\n  id; // element id\n  ns; // NS element attr\n  st; // element styles as object\n  cl; // class list\n  ar; // attributes\n  dt; // data attributres\n  tx; // innerText\n  ac; // actions\n  sc; // element scope\n  cn; // element children\n  constructor(tag, attributes, children) {\n    tag &&\n      (this.tg = tag);\n    attributes &&\n      UIBuilderHelpers.isObject(attributes) &&\n      (this.map(attributes));\n    children &&\n      (this.cn = children);\n  }\n  map(attributes) {\n    if (attributes)\n      for (let key in attributes)\n        this[UIComponent.attributes[key]] = attributes[key];\n  }\n}","import UIComponent from \"./uiComponent\";\n\nexport default class SVGUIComponent extends UIComponent {\n  ns = UIComponent.SVG_SIGNATURE;\n}\n","import UIBuilderHelpers from \"./uiBuilderHelpers\";\nimport UIComponent from \"./uiComponent\";\n\nexport default class UIBuilder {\n  _defaults = {\n    baseName: \"UI\",\n    autoID: false,\n    nestedStyles: false\n  };\n  _attrs = {\n    tg: \"div\",\n    id: \"\",\n    ns: false,\n    cl: [],\n    st: {},\n    ar: {},\n    dt: {},\n    tx: \"\",\n    ac: {},\n    sc: {}\n  };\n  _style = [];\n  constructor(options) {\n    (Object).assign(this, this._defaults, options);\n    this._elementCount = this._lvl = 0;\n  }\n  _parseStyle(el, style) {\n\n  }\n  _buildElement(attrs, parent) {\n    try {\n      let _attrs = (Object).assign({}, this._attrs, attrs);\n      //assign unique element id\n      this.autoID &&\n        _attrs.id === \"\" &&\n        (_attrs.id = this.getNextID());\n      //handle string element\n      UIBuilderHelpers.isString(attrs) &&\n      (_attrs.tg = \"span\", _attrs.tx = attrs.valueOf());\n      //create base element:\n      let el = _attrs.ns ? document.createElementNS(_attrs.ns, _attrs.tg) :\n        document.createElement(_attrs.tg);\n      //set element ID:\n      _attrs.id !== \"\" && (el.id = _attrs.id);\n      //set element classes (if any):\n      (v => {\n        return UIBuilderHelpers.isObject(v) ?\n          v :\n          v.split(\" \");\n      })(_attrs.cl)\n        .forEach((cls) => el.classList.add(cls));\n      //set element attributes (if any):\n      Object\n        .keys(_attrs.ar)\n        .forEach((key) => el.setAttribute(key, _attrs.ar[key]));\n      //set element data attributes (if any):\n      Object\n        .keys(_attrs.dt)\n        .forEach((key) => el.setAttribute(\"data-\" + key, _attrs.ar[key]));\n      //set element styles (if any):\n      Object.assign(el.style, _attrs.st);\n      //set element actions (if any):\n      Object\n        .keys(_attrs.ac)\n        .forEach((key) => el.addEventListener(key, _attrs.ac[key].bind(_attrs.sc)));\n      //set element inner HTML (if any)\n      el.innerHTML = UIBuilderHelpers.printf(_attrs.tx, _attrs.sc);\n      //append element to the parent element (if set)\n      parent &&\n        UIBuilderHelpers.isObject(parent) &&\n        (parent.appendChild(el));\n      return el;\n    } catch (e) {\n      throw new Error(\"UIBuilder._buildElement internal error. Details: \" + e);\n    }\n  }\n  _build(node, root) {\n    let el;\n    let worker = (node => {\n      var children = node.cn;\n      el = this._buildElement(node, root);\n      children &&\n        UIBuilderHelpers.isDefined(children) &&\n        (this._build(children, el));\n    }).bind(this);\n    this._lvl++;\n    try {\n      switch (true) {\n        case UIBuilderHelpers.isArray(node):\n          for (var i = 0; i < node.length; i++) worker(node[i]);\n          break;\n        case UIBuilderHelpers.isObject(node):\n          worker(node);\n          break;\n      }\n      this._lvl--;\n      return root || el || new HTMLElement;\n    } catch (e) {\n      throw new Error(\"UIBuilder._build internal error. Details: \" + e);\n    }\n  }\n  getElementCount() {\n    return this._elementCount;\n  }\n  getNextID() {\n    return this.baseName + \"-\" + this._elementCount++;\n  }\n  getBaseName() {\n    return this.baseName;\n  }\n\n  build(spec, parent) {\n    if (!UIBuilderHelpers.isObject(spec))\n      throw new TypeError(\"UIBuilder.build(spec, parent): spec must be an array\");\n    this._lvl = 0;\n    return new Promise((resolve, reject) => {\n      try {\n        resolve(this._build(spec, parent));\n      } catch (e) {\n        reject(e);\n      }\n    });\n  }\n}\n"],"names":["UIBuilderHelpers","v","undefined","this","isDefined","str","scope","regex","instance","from","to","m","isObject","exec","replace","UIComponent","tag","attributes","children","tg","map","cn","key","SVG_NS_ATTR","SVGUIComponent","ns","SVG_SIGNATURE","UIBuilder","options","_defaults","_attrs","_style","assign","_elementCount","_lvl","el","style","attrs","parent","Object","autoID","id","getNextID","isString","tx","valueOf","document","createElementNS","createElement","split","cl","forEach","cls","classList","add","keys","ar","setAttribute","dt","st","ac","addEventListener","bind","sc","innerHTML","printf","appendChild","e","Error","node","root","worker","_this","_buildElement","_build","isArray","i","length","HTMLElement","baseName","spec","TypeError","Promise","resolve","reject","_this2"],"mappings":"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"}