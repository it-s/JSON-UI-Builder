{"version":3,"file":"uibuilder.js","sources":["../src/uiBuilderHelpers.js","../src/uiComponent.js","../src/uiBuilder.js"],"sourcesContent":["export default class UIBuilderHelpers {\n  static isDefined(v) {\n    return v != undefined;\n  }\n  static isObject(v) {\n    return (this.isDefined(v) && typeof v == \"object\");\n  }\n  static isArray(v) {\n    return (this.isDefined(v) && typeof v == \"object\" && v[\"length\"] !== undefined);\n  };\n  static isString(v) {\n    return (this.isDefined(v) && typeof v == \"string\");\n  }\n  static printf(str, scope) {\n    let regex = /\\{\\{(\\w+)\\}\\}/g;\n    let instance = str;\n    let from, to, m;\n    if (this.isObject(scope)) {\n      debugger;\n      while ((m = regex.exec(str)) !== null) {\n        from = m[0]; to = scope[m[1]];\n        this.isDefined(to) &&\n          (instance = instance.replace(from, to));\n      }\n    } else return str;\n    return instance;\n  }\n}","import UIBuilderHelpers from \"./uiBuilderHelpers\";\n\nexport default class UIComponent {\n  static SVG_NS_ATTR = \"http://www.w3.org/2000/svg\";\n  static attributes = {\n    \"id\": \"id\",\n    \"ns\": \"ns\",\n    \"className\": \"cl\",\n    \"style\": \"st\",\n    \"attributes\": \"ar\",\n    \"html\": \"tx\",\n    \"data\": \"dt\",\n    \"scope\": \"sc\",\n    \"actions\": \"ac\"\n  };\n  tg; // tag name\n  id; // element id\n  ns; // NS element attr\n  st; // element styles as object\n  cl; // class list\n  ar; // attributes\n  dt; // data attributres\n  tx; // innerText\n  ac; // actions\n  sc; // element scope\n  cn; // element children\n  constructor(tag, attributes, children) {\n    tag &&\n      (this.tg = tag);\n    attributes &&\n      UIBuilderHelpers.isObject(attributes) &&\n      (this.map(attributes));\n    children &&\n      (this.cn = children);\n  }\n  map(attributes) {\n    if (attributes)\n      for (let key in attributes)\n        this[UIComponent.attributes[key]] = attributes[key];\n  }\n}","import UIBuilderHelpers from \"./uiBuilderHelpers\";\nimport UIComponent from \"./uiComponent\";\n\nclass UIBuilder {\n  _defaults = {\n    baseName: \"UI\",\n    autoID: false\n  };\n  _attrs = {\n    tg: \"div\",\n    id: \"\",\n    ns: false,\n    cl: [],\n    st: {},\n    ar: {},\n    dt: {},\n    tx: \"\",\n    ac: {},\n    sc: {}\n  };\n  constructor(options) {\n    (Object).assign(this, this._defaults, options);\n    this._elementCount = this._lvl = 0;\n  }\n  _buildElement(attrs, parent) {\n    try {\n      let _attrs = (Object).assign({}, this._attrs, attrs);\n      //assign unique element id\n      this.autoID &&\n        _attrs.id === \"\" &&\n        (_attrs.id = this.getNextID());\n      //handle string element\n      UIBuilderHelpers.isString(attrs) &&\n      (_attrs.tg = \"span\", _attrs.tx = attrs.valueOf());\n      //create base element:\n      let el = _attrs.ns ? document.createElementNS(_attrs.ns, _attrs.tg) :\n        document.createElement(_attrs.tg);\n      //set element ID:\n      _attrs.id !== \"\" && (el.id = _attrs.id);\n      //set element classes (if any):\n      (v => {\n        return UIBuilderHelpers.isObject(v) ?\n          v :\n          v.split(\" \");\n      })(_attrs.cl)\n        .forEach((cls) => el.classList.add(cls));\n      //set element attributes (if any):\n      Object\n        .keys(_attrs.ar)\n        .forEach((key) => el.setAttribute(key, _attrs.ar[key]));\n      //set element data attributes (if any):\n      Object\n        .keys(_attrs.dt)\n        .forEach((key) => el.setAttribute(\"data-\" + key, _attrs.ar[key]));\n      //set element styles (if any):\n      Object.assign(el.style, _attrs.st);\n      //set element actions (if any):\n      Object\n        .keys(_attrs.ac)\n        .forEach((key) => el.addEventListener(key, _attrs.ac[key].bind(_attrs.sc)));\n      //set element inner HTML (if any)\n      el.innerHTML = UIBuilderHelpers.printf(_attrs.tx, _attrs.sc);\n      //append element to the parent element (if set)\n      parent &&\n        UIBuilderHelpers.isObject(parent) &&\n        (parent.appendChild(el));\n      return el;\n    } catch (e) {\n      throw new Error(\"UIBuilder._buildElement internal error. Details: \" + e);\n    }\n  }\n  _build(node, root) {\n    let el;\n    let worker = (node => {\n      var children = node.cn;\n      el = this._buildElement(node, root);\n      children &&\n        UIBuilderHelpers.isDefined(children) &&\n        (this._build(children, el));\n    }).bind(this);\n    this._lvl++;\n    try {\n      switch (true) {\n        case UIBuilderHelpers.isArray(node):\n          for (var i = 0; i < node.length; i++) worker(node[i]);\n          break;\n        case UIBuilderHelpers.isObject(node):\n          worker(node);\n          break;\n      }\n      this._lvl--;\n      return root || el || new HTMLElement;\n    } catch (e) {\n      throw new Error(\"UIBuilder._build internal error. Details: \" + e);\n    }\n  }\n  getElementCount() {\n    return this._elementCount;\n  }\n  getNextID() {\n    return this.baseName + \"-\" + this._elementCount++;\n  }\n  getBaseName() {\n    return this.baseName;\n  }\n\n  build(spec, parent) {\n    if (!UIBuilderHelpers.isObject(spec))\n      throw new TypeError(\"UIBuilder.build(spec, parent): spec must be an array\");\n    this._lvl = 0;\n    return new Promise((resolve, reject) => {\n      try {\n        resolve(this._build(spec, parent));\n      } catch (e) {\n        reject(e);\n      }\n    });\n  }\n}"],"names":["UIBuilderHelpers","v","undefined","this","isDefined","str","scope","regex","instance","from","to","m","isObject","exec","replace","UIComponent","tag","attributes","children","tg","map","cn","key","SVG_NS_ATTR","UIBuilder","options","_defaults","_attrs","assign","_elementCount","_lvl","attrs","parent","Object","autoID","id","getNextID","isString","tx","valueOf","el","ns","document","createElementNS","createElement","split","cl","forEach","cls","classList","add","keys","ar","setAttribute","dt","style","st","ac","addEventListener","bind","sc","innerHTML","printf","appendChild","e","Error","node","root","worker","_this","_buildElement","_build","isArray","i","length","HTMLElement","baseName","spec","TypeError","Promise","resolve","reject","_this2"],"mappings":"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"}